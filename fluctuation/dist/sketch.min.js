/**
 * Fluctuation.
 * Source code in TypeScript: https://github.com/fal-works/p5js-sketches/tree/master/fluctuation
 *
 * @copyright 2020 FAL
 * @version 0.1.0
 */
!function(e){"use strict";function t(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}const a=t(e),{onSetup:n,onInstantiate:o}=a;let s,i;o.push((e=>{s=e})),n.push((()=>{i=e.canvas}));const r=180,c=.0075;let l,u=1e3*Math.random(),p=.02;const h=()=>{l.clear(),l.noStroke(),l.fill(255,32);const t=l.width,a=l.height,n=.25*a,o=.75*t,s=.75*a;for(let a=.25*t;a<o;a+=1)for(let t=n;t<s;t+=1){const n=90,o=e.p.noise(u+c*a)+e.p.noise(c*t-u)-1,s=n*o,i=2*Math.PI*o;l.circle(a+s*Math.cos(i),t+s*Math.sin(i),4)}u+=p,p=Math.max(.02,.92*p)};e.onSetup.push((()=>{l=e.p.createGraphics(r,r),h()}));const d=()=>{e.p.imageMode(e.p.CENTER);e.p.image(l,-18,-18)},f=()=>{const{width:e,height:t}=i.logicalSize,a=e/4,n=t/4;for(let e=1;e<=3;e+=1)for(let t=1;t<=3;t+=1)s.push(),s.translate(e*a,t*n),d(),s.pop()},g={keyTyped:()=>{switch(s.key){case"p":e.pauseOrResume();break;case"g":s.save("image.png")}return!1},mousePressed:()=>{p=.2},draw:()=>{h(),s.background(0),i.drawScaled(f)}};e.startSketch({htmlElement:"Fluctuation",logicalCanvasWidth:720,logicalCanvasHeight:720,initialize:()=>{s.imageMode(s.CENTER)},windowResized:()=>i.resizeIfNeeded(),onCanvasResized:()=>{},p5Methods:g})}(p5ex);