{"version":3,"file":"sketch.js","sources":["../src/common.ts","../src/settings.ts","../src/sketch.ts","../src/main.ts"],"sourcesContent":["/**\n * ---- Common ----------------------------------------------------------------\n */\n\nimport p5 from \"p5\";\nimport * as CCC from \"@fal-works/creative-coding-core\";\nimport * as p5ex from \"@fal-works/p5-extension\";\n\nexport const { Random } = CCC;\n\nexport const { onSetup, onInstantiate } = p5ex;\n\n/**\n * Shared p5 instance.\n */\nexport let p: p5;\n\nonInstantiate.push((p5Instance) => {\n  p = p5Instance;\n});\n\n/**\n * Shared canvas instance.\n */\nexport let canvas: p5ex.ScaledCanvas;\n\n/**\n * Alias for `p.drawingContext`.\n */\nexport let context: CanvasRenderingContext2D;\n\nonSetup.push(() => {\n  canvas = p5ex.canvas;\n  context = (p as any).drawingContext; // eslint-disable-line\n});\n\nexport const resetCommon = () => {};\n","/**\n * ---- Settings --------------------------------------------------------------\n */\n\n/** The id of the HTML element to which the canvas should belong. */\nexport const HTML_ELEMENT_ID = \"ColoredShadow3\";\n\n/** The logical width of the canvas. */\nexport const LOGICAL_CANVAS_WIDTH = 720;\n\n/** The logical height of the canvas. */\nexport const LOGICAL_CANVAS_HEIGHT = 720;\n","/**\n * ---- Sketch ----------------------------------------------------------------\n */\n\nimport { pauseOrResume, cielchColor, setShadow } from \"@fal-works/p5-extension\";\nimport { p, canvas, Random } from \"./common\";\n\n// ---- reset & initialize ----\nconst createColors = (baseHue?: number) => {\n  const hue = baseHue || Random.angle();\n  const lightness = Random.between(50, 100);\n\n  return {\n    stroke: cielchColor(lightness, 110, hue, 0.8 * 255),\n    shadow: cielchColor(lightness, 110, hue, 0.5 * 255),\n  };\n};\n\nconst drawRandomShape = (x: number, y: number, baseHue: number): void => {\n  const colors = createColors(baseHue);\n\n  p.push();\n  p.stroke(colors.stroke);\n  p.noFill();\n  setShadow(colors.shadow, 16, 15, 20);\n\n  p.rect(x, y, 100, 100);\n\n  p.pop();\n};\n\nconst drawSketch = (): void => {\n  p.blendMode(p.REPLACE);\n  p.background(252);\n  p.blendMode(p.MULTIPLY);\n\n  const { width, height } = canvas.logicalSize;\n\n  p.push();\n\n  const interval = Random.between(50, 100);\n  for (let x = 100; x < width - 100; x += interval) {\n    for (let y = 100; y < height - 100; y += interval) {\n      drawRandomShape(x, y, Random.angle());\n    }\n  }\n\n  p.pop();\n};\n\nexport const reset = (): void => {\n  canvas.drawScaled(drawSketch);\n};\n\nexport const initialize = (): void => {\n  p.rectMode(p.CENTER);\n  p.strokeWeight(8);\n\n  reset();\n};\n\n// ---- UI ----\n\nconst mousePressed = () => reset();\n\nconst keyTyped = () => {\n  switch (p.key) {\n    case \"p\":\n      pauseOrResume();\n      break;\n    case \"g\":\n      p.save(\"image.png\");\n      break;\n    case \"r\":\n      reset();\n      break;\n  }\n\n  return false;\n};\n\n// ---- p5 methods ----\n\nexport const p5Methods = {\n  keyTyped,\n  mousePressed,\n};\n","/**\n * ---- Main ------------------------------------------------------------------\n */\n\nimport { startSketch } from \"@fal-works/p5-extension\";\n\nimport { canvas } from \"./common\";\nimport * as Settings from \"./settings\";\nimport * as sketch from \"./sketch\";\n\n// ---- start sketch ----\n\nstartSketch({\n  htmlElement: Settings.HTML_ELEMENT_ID,\n  logicalCanvasWidth: Settings.LOGICAL_CANVAS_WIDTH,\n  logicalCanvasHeight: Settings.LOGICAL_CANVAS_HEIGHT,\n  initialize: sketch.initialize, // delete?\n  windowResized: () => canvas.resizeIfNeeded(),\n  onCanvasResized: sketch.reset,\n  p5Methods: sketch.p5Methods,\n});\n"],"names":["CCC","p5ex","p5ex.canvas","cielchColor","setShadow","pauseOrResume","startSketch","Settings.HTML_ELEMENT_ID","Settings.LOGICAL_CANVAS_WIDTH","Settings.LOGICAL_CANVAS_HEIGHT","sketch.initialize","sketch.reset","sketch.p5Methods"],"mappings":"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"}