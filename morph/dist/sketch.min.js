/**
 * Morph.
 * Source code in TypeScript: https://github.com/fal-works/p5js-sketches/tree/master/morph
 *
 * @copyright 2020 FAL
 * @version 0.1.0
 */
!function(e,t){"use strict";function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}const n=a(e),r=a(t),{Random:o}=r,{onSetup:c,onInstantiate:i}=n;let s,l;i.push((e=>{s=e})),c.push((()=>{l=e.canvas}));const{PI:h,cos:g,sin:d}=Math;let u=1024*Math.random();const f=(e,t,a)=>({index:e,x:t,y:a,targetX:t,targetY:a}),b=e=>{const t=u,a=2*h*(e.index/1e3),n=10*d(t)*g(a),r=10*d(t)*d(a),o=10*g(t),c=4+20*s.noise(n,r,o);s.circle(e.x,e.y,c)},p=e=>{e.x+=.1*(e.targetX-e.x),e.y+=.1*(e.targetY-e.y)},{PI:w,cos:y,sin:k}=Math,m=[],v=()=>{const e=m.length,t=2*w/e;m.forEach(((e,a)=>{const n=a*t;e.targetX=240*y(n),e.targetY=240*k(n)}))};let z,E;e.onSetup.push((e=>{z=e.color(255,12),E=e.color(255,0,128,16)}));const M=()=>{const{width:e,height:t}=l.logicalSize;s.translate(e/2,t/2),m.forEach(b)},S={keyTyped:()=>{switch(s.key){case"p":e.pauseOrResume();break;case"g":s.save("image.png")}return!1},draw:()=>{switch(s.frameCount%180){case 0:v();break;case 60:(()=>{const e=m.length,t=2*w/e;m.forEach(((e,a)=>{const n=a*t,r=1+k(4*n);e.targetX=120*y(n)*r,e.targetY=120*k(n)*r}))})();break;case 120:(()=>{const{width:e,height:t}=l.logicalSize,a=e/2,n=t/2;m.forEach((e=>{e.targetX=o.between(-a,a),e.targetY=o.between(-n,n)}))})()}u+=.01,m.forEach(p),s.blendMode(s.ADD),s.fill(z),s.rect(0,0,s.width,s.height),s.blendMode(s.BLEND),s.fill(E),l.drawScaled(M)}};e.startSketch({htmlElement:"Morph",logicalCanvasWidth:720,logicalCanvasHeight:720,initialize:()=>{s.frameRate(30),s.noStroke(),m.length=0;const{width:e,height:t}=l.logicalSize,a=e/2,n=t/2;for(let e=0;e<1e3;e+=1)m.push(f(e,o.between(-a,a),o.between(-n,n)));v(),s.background(255)},windowResized:()=>l.resizeIfNeeded(),onCanvasResized:()=>{},p5Methods:S})}(p5ex,CreativeCodingCore);